<!DOCTYPE html>
<html class="has-navbar-fixed-top" style="scroll-behavior: smooth;">
  <head>
    <title>Marivel</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>


    <!-- Remove Turbolinks. I can't fix the problems with Javascript -->
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <!-- Basic Page Needs
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Scripts
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <!-- Gon gem
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <%= include_gon %>


    <!-- cdn pour IE 11 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

    <!-- Font Awesone
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script src="https://kit.fontawesome.com/82b59b489d.js" crossorigin="anonymous"></script>

    <!-- Google font Lora, Raleway -->
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Raleway:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap" rel="stylesheet">

    <!-- Google font Yellow Tail, Paprika -->
    <link href="https://fonts.googleapis.com/css2?family=Paprika&family=Yellowtail&display=swap" rel="stylesheet">

    <!-- Mapbox language selon la langue du navigateur -->
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-language/v0.10.1/mapbox-gl-language.js'></script>

  </head>

  <body>

    <button onclick="topFunction()" id="myBtn" title="Go to top">
      <span class="icon"><i class="fas fa-chevron-circle-left fa-rotate-90"></i></span>Top
    </button>

    <%= render 'shared/navbar' %>

    <% if isAdmin? %>
      <%= render 'shared/navBarAdmin' %>
    <% end %>

    <% if flash[:notice] %>
    <br>
    <br>
      <% flash.each do |type, msg| %>
        <div class="notification is-info is-light has-text-centered" >
          <%= msg %>
        </div>
      <% end %>
    <% elsif flash[:success]%>
    <br>
    <br>
      <% flash.each do |type, msg| %>
        <div class="notification is-primary is-light has-text-centered">
          <%= msg %>
        </div>
      <% end %>
    <% elsif flash[:alert]%>
    <br>
    <br>
      <% flash.each do |type, msg| %>
        <div class="notification is-danger is-light has-text-centered">
          <%= msg %>
        </div>
      <% end %>
    <% end %>



    <%= yield %>


    <footer>
      <%= render 'shared/footer' %>
    </footer>

    <script>
      //Get the button
      var mybutton = document.getElementById("myBtn");

      // When the user scrolls down 20px from the top of the document, show the button
      window.onscroll = function() {scrollFunction()};

      function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
          mybutton.style.display = "block";
        } else {
          mybutton.style.display = "none";
        }
      }

      // When the user clicks on the button, scroll to the top of the document
      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }
      </script>

  </body>
</html>
